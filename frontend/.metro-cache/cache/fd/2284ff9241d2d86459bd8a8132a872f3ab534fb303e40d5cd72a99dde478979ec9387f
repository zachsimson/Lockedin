{"dependencies":[{"name":"./encodePacket.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":71,"index":71}}],"key":"l0XJith170aiQBKbDxvaf5HJzjc=","exportNames":["*"],"imports":1}},{"name":"./decodePacket.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":72},"end":{"line":2,"column":49,"index":121}}],"key":"k2ePvc7PPyN9sm4h8mrZRv0s/Hg=","exportNames":["*"],"imports":1}},{"name":"./commons.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":122},"end":{"line":3,"column":45,"index":167}}],"key":"glGFVKq6JnHqcEVNii1WndfU66Y=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.createPacketEncoderStream = createPacketEncoderStream;\n  exports.createPacketDecoderStream = createPacketDecoderStream;\n  Object.defineProperty(exports, \"protocol\", {\n    enumerable: true,\n    get: function () {\n      return protocol;\n    }\n  });\n  Object.defineProperty(exports, \"encodePacket\", {\n    enumerable: true,\n    get: function () {\n      return _encodePacketJs.encodePacket;\n    }\n  });\n  Object.defineProperty(exports, \"encodePayload\", {\n    enumerable: true,\n    get: function () {\n      return encodePayload;\n    }\n  });\n  Object.defineProperty(exports, \"decodePacket\", {\n    enumerable: true,\n    get: function () {\n      return _decodePacketJs.decodePacket;\n    }\n  });\n  Object.defineProperty(exports, \"decodePayload\", {\n    enumerable: true,\n    get: function () {\n      return decodePayload;\n    }\n  });\n  var _encodePacketJs = require(_dependencyMap[0], \"./encodePacket.js\");\n  var _decodePacketJs = require(_dependencyMap[1], \"./decodePacket.js\");\n  var _commonsJs = require(_dependencyMap[2], \"./commons.js\");\n  var SEPARATOR = String.fromCharCode(30); // see https://en.wikipedia.org/wiki/Delimiter#ASCII_delimited_text\n  var encodePayload = function encodePayload(packets, callback) {\n    // some packets may be added to the array while encoding, so the initial length must be saved\n    var length = packets.length;\n    var encodedPackets = new Array(length);\n    var count = 0;\n    packets.forEach(function (packet, i) {\n      // force base64 encoding for binary packets\n      (0, _encodePacketJs.encodePacket)(packet, false, function (encodedPacket) {\n        encodedPackets[i] = encodedPacket;\n        if (++count === length) {\n          callback(encodedPackets.join(SEPARATOR));\n        }\n      });\n    });\n  };\n  var decodePayload = function decodePayload(encodedPayload, binaryType) {\n    var encodedPackets = encodedPayload.split(SEPARATOR);\n    var packets = [];\n    for (var i = 0; i < encodedPackets.length; i++) {\n      var decodedPacket = (0, _decodePacketJs.decodePacket)(encodedPackets[i], binaryType);\n      packets.push(decodedPacket);\n      if (decodedPacket.type === \"error\") {\n        break;\n      }\n    }\n    return packets;\n  };\n  function createPacketEncoderStream() {\n    return new TransformStream({\n      transform: function transform(packet, controller) {\n        (0, _encodePacketJs.encodePacketToBinary)(packet, function (encodedPacket) {\n          var payloadLength = encodedPacket.length;\n          var header;\n          // inspired by the WebSocket format: https://developer.mozilla.org/en-US/docs/Web/API/WebSockets_API/Writing_WebSocket_servers#decoding_payload_length\n          if (payloadLength < 126) {\n            header = new Uint8Array(1);\n            new DataView(header.buffer).setUint8(0, payloadLength);\n          } else if (payloadLength < 65536) {\n            header = new Uint8Array(3);\n            var view = new DataView(header.buffer);\n            view.setUint8(0, 126);\n            view.setUint16(1, payloadLength);\n          } else {\n            header = new Uint8Array(9);\n            var _view = new DataView(header.buffer);\n            _view.setUint8(0, 127);\n            _view.setBigUint64(1, BigInt(payloadLength));\n          }\n          // first bit indicates whether the payload is plain text (0) or binary (1)\n          if (packet.data && typeof packet.data !== \"string\") {\n            header[0] |= 0x80;\n          }\n          controller.enqueue(header);\n          controller.enqueue(encodedPacket);\n        });\n      }\n    });\n  }\n  var TEXT_DECODER;\n  function totalLength(chunks) {\n    return chunks.reduce(function (acc, chunk) {\n      return acc + chunk.length;\n    }, 0);\n  }\n  function concatChunks(chunks, size) {\n    if (chunks[0].length === size) {\n      return chunks.shift();\n    }\n    var buffer = new Uint8Array(size);\n    var j = 0;\n    for (var i = 0; i < size; i++) {\n      buffer[i] = chunks[0][j++];\n      if (j === chunks[0].length) {\n        chunks.shift();\n        j = 0;\n      }\n    }\n    if (chunks.length && j < chunks[0].length) {\n      chunks[0] = chunks[0].slice(j);\n    }\n    return buffer;\n  }\n  function createPacketDecoderStream(maxPayload, binaryType) {\n    if (!TEXT_DECODER) {\n      TEXT_DECODER = new TextDecoder();\n    }\n    var chunks = [];\n    var state = 0 /* State.READ_HEADER */;\n    var expectedLength = -1;\n    var isBinary = false;\n    return new TransformStream({\n      transform: function transform(chunk, controller) {\n        chunks.push(chunk);\n        while (true) {\n          if (state === 0 /* State.READ_HEADER */) {\n            if (totalLength(chunks) < 1) {\n              break;\n            }\n            var header = concatChunks(chunks, 1);\n            isBinary = (header[0] & 0x80) === 0x80;\n            expectedLength = header[0] & 0x7f;\n            if (expectedLength < 126) {\n              state = 3 /* State.READ_PAYLOAD */;\n            } else if (expectedLength === 126) {\n              state = 1 /* State.READ_EXTENDED_LENGTH_16 */;\n            } else {\n              state = 2 /* State.READ_EXTENDED_LENGTH_64 */;\n            }\n          } else if (state === 1 /* State.READ_EXTENDED_LENGTH_16 */) {\n            if (totalLength(chunks) < 2) {\n              break;\n            }\n            var headerArray = concatChunks(chunks, 2);\n            expectedLength = new DataView(headerArray.buffer, headerArray.byteOffset, headerArray.length).getUint16(0);\n            state = 3 /* State.READ_PAYLOAD */;\n          } else if (state === 2 /* State.READ_EXTENDED_LENGTH_64 */) {\n            if (totalLength(chunks) < 8) {\n              break;\n            }\n            var _headerArray = concatChunks(chunks, 8);\n            var view = new DataView(_headerArray.buffer, _headerArray.byteOffset, _headerArray.length);\n            var n = view.getUint32(0);\n            if (n > Math.pow(2, 53 - 32) - 1) {\n              // the maximum safe integer in JavaScript is 2^53 - 1\n              controller.enqueue(_commonsJs.ERROR_PACKET);\n              break;\n            }\n            expectedLength = n * Math.pow(2, 32) + view.getUint32(4);\n            state = 3 /* State.READ_PAYLOAD */;\n          } else {\n            if (totalLength(chunks) < expectedLength) {\n              break;\n            }\n            var data = concatChunks(chunks, expectedLength);\n            controller.enqueue((0, _decodePacketJs.decodePacket)(isBinary ? data : TEXT_DECODER.decode(data), binaryType));\n            state = 0 /* State.READ_HEADER */;\n          }\n          if (expectedLength === 0 || expectedLength > maxPayload) {\n            controller.enqueue(_commonsJs.ERROR_PACKET);\n            break;\n          }\n        }\n      }\n    });\n  }\n  var protocol = 4;\n});","lineCount":189,"map":[[7,2,32,0,"exports"],[7,9,32,0],[7,10,32,0,"createPacketEncoderStream"],[7,35,32,0],[7,38,32,0,"createPacketEncoderStream"],[7,63,32,0],[8,2,87,0,"exports"],[8,9,87,0],[8,10,87,0,"createPacketDecoderStream"],[8,35,87,0],[8,38,87,0,"createPacketDecoderStream"],[8,63,87,0],[9,2,155,0,"Object"],[9,8,155,0],[9,9,155,0,"defineProperty"],[9,23,155,0],[9,24,155,0,"exports"],[9,31,155,0],[10,4,155,0,"enumerable"],[10,14,155,0],[11,4,155,0,"get"],[11,7,155,0],[11,18,155,0,"get"],[11,19,155,0],[12,6,155,0],[12,13,155,0,"protocol"],[12,21,155,0],[13,4,155,0],[14,2,155,0],[15,2,156,0,"Object"],[15,8,156,0],[15,9,156,0,"defineProperty"],[15,23,156,0],[15,24,156,0,"exports"],[15,31,156,0],[16,4,156,0,"enumerable"],[16,14,156,0],[17,4,156,0,"get"],[17,7,156,0],[17,18,156,0,"get"],[17,19,156,0],[18,6,156,0],[18,13,156,9,"encodePacket"],[18,28,156,21],[18,29,156,21,"encodePacket"],[18,41,156,21],[19,4,156,21],[20,2,156,21],[21,2,156,0,"Object"],[21,8,156,0],[21,9,156,0,"defineProperty"],[21,23,156,0],[21,24,156,0,"exports"],[21,31,156,0],[22,4,156,0,"enumerable"],[22,14,156,0],[23,4,156,0,"get"],[23,7,156,0],[23,18,156,0,"get"],[23,19,156,0],[24,6,156,0],[24,13,156,23,"encodePayload"],[24,26,156,36],[25,4,156,36],[26,2,156,36],[27,2,156,0,"Object"],[27,8,156,0],[27,9,156,0,"defineProperty"],[27,23,156,0],[27,24,156,0,"exports"],[27,31,156,0],[28,4,156,0,"enumerable"],[28,14,156,0],[29,4,156,0,"get"],[29,7,156,0],[29,18,156,0,"get"],[29,19,156,0],[30,6,156,0],[30,13,156,38,"decodePacket"],[30,28,156,50],[30,29,156,50,"decodePacket"],[30,41,156,50],[31,4,156,50],[32,2,156,50],[33,2,156,0,"Object"],[33,8,156,0],[33,9,156,0,"defineProperty"],[33,23,156,0],[33,24,156,0,"exports"],[33,31,156,0],[34,4,156,0,"enumerable"],[34,14,156,0],[35,4,156,0,"get"],[35,7,156,0],[35,18,156,0,"get"],[35,19,156,0],[36,6,156,0],[36,13,156,52,"decodePayload"],[36,26,156,65],[37,4,156,65],[38,2,156,65],[39,2,1,0],[39,6,1,0,"_encodePacketJs"],[39,21,1,0],[39,24,1,0,"require"],[39,31,1,0],[39,32,1,0,"_dependencyMap"],[39,46,1,0],[40,2,2,0],[40,6,2,0,"_decodePacketJs"],[40,21,2,0],[40,24,2,0,"require"],[40,31,2,0],[40,32,2,0,"_dependencyMap"],[40,46,2,0],[41,2,3,0],[41,6,3,0,"_commonsJs"],[41,16,3,0],[41,19,3,0,"require"],[41,26,3,0],[41,27,3,0,"_dependencyMap"],[41,41,3,0],[42,2,4,0],[42,6,4,6,"SEPARATOR"],[42,15,4,15],[42,18,4,18,"String"],[42,24,4,24],[42,25,4,25,"fromCharCode"],[42,37,4,37],[42,38,4,38],[42,40,4,40],[42,41,4,41],[42,42,4,42],[42,43,4,43],[43,2,5,0],[43,6,5,6,"encodePayload"],[43,19,5,19],[43,22,5,22],[43,31,5,6,"encodePayload"],[43,44,5,19,"encodePayload"],[43,45,5,23,"packets"],[43,52,5,30],[43,54,5,32,"callback"],[43,62,5,40],[43,64,5,45],[44,4,6,4],[45,4,7,4],[45,8,7,10,"length"],[45,14,7,16],[45,17,7,19,"packets"],[45,24,7,26],[45,25,7,27,"length"],[45,31,7,33],[46,4,8,4],[46,8,8,10,"encodedPackets"],[46,22,8,24],[46,25,8,27],[46,29,8,31,"Array"],[46,34,8,36],[46,35,8,37,"length"],[46,41,8,43],[46,42,8,44],[47,4,9,4],[47,8,9,8,"count"],[47,13,9,13],[47,16,9,16],[47,17,9,17],[48,4,10,4,"packets"],[48,11,10,11],[48,12,10,12,"forEach"],[48,19,10,19],[48,20,10,20],[48,30,10,21,"packet"],[48,36,10,27],[48,38,10,29,"i"],[48,39,10,30],[48,41,10,35],[49,6,11,8],[50,6,12,8],[50,10,12,8,"encodePacket"],[50,25,12,20],[50,26,12,20,"encodePacket"],[50,38,12,20],[50,40,12,21,"packet"],[50,46,12,27],[50,48,12,29],[50,53,12,34],[50,55,12,36],[50,65,12,37,"encodedPacket"],[50,78,12,50],[50,80,12,55],[51,8,13,12,"encodedPackets"],[51,22,13,26],[51,23,13,27,"i"],[51,24,13,28],[51,25,13,29],[51,28,13,32,"encodedPacket"],[51,41,13,45],[52,8,14,12],[52,12,14,16],[52,14,14,18,"count"],[52,19,14,23],[52,24,14,28,"length"],[52,30,14,34],[52,32,14,36],[53,10,15,16,"callback"],[53,18,15,24],[53,19,15,25,"encodedPackets"],[53,33,15,39],[53,34,15,40,"join"],[53,38,15,44],[53,39,15,45,"SEPARATOR"],[53,48,15,54],[53,49,15,55],[53,50,15,56],[54,8,16,12],[55,6,17,8],[55,7,17,9],[55,8,17,10],[56,4,18,4],[56,5,18,5],[56,6,18,6],[57,2,19,0],[57,3,19,1],[58,2,20,0],[58,6,20,6,"decodePayload"],[58,19,20,19],[58,22,20,22],[58,31,20,6,"decodePayload"],[58,44,20,19,"decodePayload"],[58,45,20,23,"encodedPayload"],[58,59,20,37],[58,61,20,39,"binaryType"],[58,71,20,49],[58,73,20,54],[59,4,21,4],[59,8,21,10,"encodedPackets"],[59,22,21,24],[59,25,21,27,"encodedPayload"],[59,39,21,41],[59,40,21,42,"split"],[59,45,21,47],[59,46,21,48,"SEPARATOR"],[59,55,21,57],[59,56,21,58],[60,4,22,4],[60,8,22,10,"packets"],[60,15,22,17],[60,18,22,20],[60,20,22,22],[61,4,23,4],[61,9,23,9],[61,13,23,13,"i"],[61,14,23,14],[61,17,23,17],[61,18,23,18],[61,20,23,20,"i"],[61,21,23,21],[61,24,23,24,"encodedPackets"],[61,38,23,38],[61,39,23,39,"length"],[61,45,23,45],[61,47,23,47,"i"],[61,48,23,48],[61,50,23,50],[61,52,23,52],[62,6,24,8],[62,10,24,14,"decodedPacket"],[62,23,24,27],[62,26,24,30],[62,30,24,30,"decodePacket"],[62,45,24,42],[62,46,24,42,"decodePacket"],[62,58,24,42],[62,60,24,43,"encodedPackets"],[62,74,24,57],[62,75,24,58,"i"],[62,76,24,59],[62,77,24,60],[62,79,24,62,"binaryType"],[62,89,24,72],[62,90,24,73],[63,6,25,8,"packets"],[63,13,25,15],[63,14,25,16,"push"],[63,18,25,20],[63,19,25,21,"decodedPacket"],[63,32,25,34],[63,33,25,35],[64,6,26,8],[64,10,26,12,"decodedPacket"],[64,23,26,25],[64,24,26,26,"type"],[64,28,26,30],[64,33,26,35],[64,40,26,42],[64,42,26,44],[65,8,27,12],[66,6,28,8],[67,4,29,4],[68,4,30,4],[68,11,30,11,"packets"],[68,18,30,18],[69,2,31,0],[69,3,31,1],[70,2,32,7],[70,11,32,16,"createPacketEncoderStream"],[70,36,32,41,"createPacketEncoderStream"],[70,37,32,41],[70,39,32,44],[71,4,33,4],[71,11,33,11],[71,15,33,15,"TransformStream"],[71,30,33,30],[71,31,33,31],[72,6,34,8,"transform"],[72,15,34,17],[72,26,34,8,"transform"],[72,35,34,17,"transform"],[72,36,34,18,"packet"],[72,42,34,24],[72,44,34,26,"controller"],[72,54,34,36],[72,56,34,38],[73,8,35,12],[73,12,35,12,"encodePacketToBinary"],[73,27,35,32],[73,28,35,32,"encodePacketToBinary"],[73,48,35,32],[73,50,35,33,"packet"],[73,56,35,39],[73,58,35,41],[73,68,35,42,"encodedPacket"],[73,81,35,55],[73,83,35,60],[74,10,36,16],[74,14,36,22,"payloadLength"],[74,27,36,35],[74,30,36,38,"encodedPacket"],[74,43,36,51],[74,44,36,52,"length"],[74,50,36,58],[75,10,37,16],[75,14,37,20,"header"],[75,20,37,26],[76,10,38,16],[77,10,39,16],[77,14,39,20,"payloadLength"],[77,27,39,33],[77,30,39,36],[77,33,39,39],[77,35,39,41],[78,12,40,20,"header"],[78,18,40,26],[78,21,40,29],[78,25,40,33,"Uint8Array"],[78,35,40,43],[78,36,40,44],[78,37,40,45],[78,38,40,46],[79,12,41,20],[79,16,41,24,"DataView"],[79,24,41,32],[79,25,41,33,"header"],[79,31,41,39],[79,32,41,40,"buffer"],[79,38,41,46],[79,39,41,47],[79,40,41,48,"setUint8"],[79,48,41,56],[79,49,41,57],[79,50,41,58],[79,52,41,60,"payloadLength"],[79,65,41,73],[79,66,41,74],[80,10,42,16],[80,11,42,17],[80,17,43,21],[80,21,43,25,"payloadLength"],[80,34,43,38],[80,37,43,41],[80,42,43,46],[80,44,43,48],[81,12,44,20,"header"],[81,18,44,26],[81,21,44,29],[81,25,44,33,"Uint8Array"],[81,35,44,43],[81,36,44,44],[81,37,44,45],[81,38,44,46],[82,12,45,20],[82,16,45,26,"view"],[82,20,45,30],[82,23,45,33],[82,27,45,37,"DataView"],[82,35,45,45],[82,36,45,46,"header"],[82,42,45,52],[82,43,45,53,"buffer"],[82,49,45,59],[82,50,45,60],[83,12,46,20,"view"],[83,16,46,24],[83,17,46,25,"setUint8"],[83,25,46,33],[83,26,46,34],[83,27,46,35],[83,29,46,37],[83,32,46,40],[83,33,46,41],[84,12,47,20,"view"],[84,16,47,24],[84,17,47,25,"setUint16"],[84,26,47,34],[84,27,47,35],[84,28,47,36],[84,30,47,38,"payloadLength"],[84,43,47,51],[84,44,47,52],[85,10,48,16],[85,11,48,17],[85,17,49,21],[86,12,50,20,"header"],[86,18,50,26],[86,21,50,29],[86,25,50,33,"Uint8Array"],[86,35,50,43],[86,36,50,44],[86,37,50,45],[86,38,50,46],[87,12,51,20],[87,16,51,26,"view"],[87,21,51,30],[87,24,51,33],[87,28,51,37,"DataView"],[87,36,51,45],[87,37,51,46,"header"],[87,43,51,52],[87,44,51,53,"buffer"],[87,50,51,59],[87,51,51,60],[88,12,52,20,"view"],[88,17,52,24],[88,18,52,25,"setUint8"],[88,26,52,33],[88,27,52,34],[88,28,52,35],[88,30,52,37],[88,33,52,40],[88,34,52,41],[89,12,53,20,"view"],[89,17,53,24],[89,18,53,25,"setBigUint64"],[89,30,53,37],[89,31,53,38],[89,32,53,39],[89,34,53,41,"BigInt"],[89,40,53,47],[89,41,53,48,"payloadLength"],[89,54,53,61],[89,55,53,62],[89,56,53,63],[90,10,54,16],[91,10,55,16],[92,10,56,16],[92,14,56,20,"packet"],[92,20,56,26],[92,21,56,27,"data"],[92,25,56,31],[92,29,56,35],[92,36,56,42,"packet"],[92,42,56,48],[92,43,56,49,"data"],[92,47,56,53],[92,52,56,58],[92,60,56,66],[92,62,56,68],[93,12,57,20,"header"],[93,18,57,26],[93,19,57,27],[93,20,57,28],[93,21,57,29],[93,25,57,33],[93,29,57,37],[94,10,58,16],[95,10,59,16,"controller"],[95,20,59,26],[95,21,59,27,"enqueue"],[95,28,59,34],[95,29,59,35,"header"],[95,35,59,41],[95,36,59,42],[96,10,60,16,"controller"],[96,20,60,26],[96,21,60,27,"enqueue"],[96,28,60,34],[96,29,60,35,"encodedPacket"],[96,42,60,48],[96,43,60,49],[97,8,61,12],[97,9,61,13],[97,10,61,14],[98,6,62,8],[99,4,63,4],[99,5,63,5],[99,6,63,6],[100,2,64,0],[101,2,65,0],[101,6,65,4,"TEXT_DECODER"],[101,18,65,16],[102,2,66,0],[102,11,66,9,"totalLength"],[102,22,66,20,"totalLength"],[102,23,66,21,"chunks"],[102,29,66,27],[102,31,66,29],[103,4,67,4],[103,11,67,11,"chunks"],[103,17,67,17],[103,18,67,18,"reduce"],[103,24,67,24],[103,25,67,25],[103,35,67,26,"acc"],[103,38,67,29],[103,40,67,31,"chunk"],[103,45,67,36],[104,6,67,36],[104,13,67,41,"acc"],[104,16,67,44],[104,19,67,47,"chunk"],[104,24,67,52],[104,25,67,53,"length"],[104,31,67,59],[105,4,67,59],[105,7,67,61],[105,8,67,62],[105,9,67,63],[106,2,68,0],[107,2,69,0],[107,11,69,9,"concatChunks"],[107,23,69,21,"concatChunks"],[107,24,69,22,"chunks"],[107,30,69,28],[107,32,69,30,"size"],[107,36,69,34],[107,38,69,36],[108,4,70,4],[108,8,70,8,"chunks"],[108,14,70,14],[108,15,70,15],[108,16,70,16],[108,17,70,17],[108,18,70,18,"length"],[108,24,70,24],[108,29,70,29,"size"],[108,33,70,33],[108,35,70,35],[109,6,71,8],[109,13,71,15,"chunks"],[109,19,71,21],[109,20,71,22,"shift"],[109,25,71,27],[109,26,71,28],[109,27,71,29],[110,4,72,4],[111,4,73,4],[111,8,73,10,"buffer"],[111,14,73,16],[111,17,73,19],[111,21,73,23,"Uint8Array"],[111,31,73,33],[111,32,73,34,"size"],[111,36,73,38],[111,37,73,39],[112,4,74,4],[112,8,74,8,"j"],[112,9,74,9],[112,12,74,12],[112,13,74,13],[113,4,75,4],[113,9,75,9],[113,13,75,13,"i"],[113,14,75,14],[113,17,75,17],[113,18,75,18],[113,20,75,20,"i"],[113,21,75,21],[113,24,75,24,"size"],[113,28,75,28],[113,30,75,30,"i"],[113,31,75,31],[113,33,75,33],[113,35,75,35],[114,6,76,8,"buffer"],[114,12,76,14],[114,13,76,15,"i"],[114,14,76,16],[114,15,76,17],[114,18,76,20,"chunks"],[114,24,76,26],[114,25,76,27],[114,26,76,28],[114,27,76,29],[114,28,76,30,"j"],[114,29,76,31],[114,31,76,33],[114,32,76,34],[115,6,77,8],[115,10,77,12,"j"],[115,11,77,13],[115,16,77,18,"chunks"],[115,22,77,24],[115,23,77,25],[115,24,77,26],[115,25,77,27],[115,26,77,28,"length"],[115,32,77,34],[115,34,77,36],[116,8,78,12,"chunks"],[116,14,78,18],[116,15,78,19,"shift"],[116,20,78,24],[116,21,78,25],[116,22,78,26],[117,8,79,12,"j"],[117,9,79,13],[117,12,79,16],[117,13,79,17],[118,6,80,8],[119,4,81,4],[120,4,82,4],[120,8,82,8,"chunks"],[120,14,82,14],[120,15,82,15,"length"],[120,21,82,21],[120,25,82,25,"j"],[120,26,82,26],[120,29,82,29,"chunks"],[120,35,82,35],[120,36,82,36],[120,37,82,37],[120,38,82,38],[120,39,82,39,"length"],[120,45,82,45],[120,47,82,47],[121,6,83,8,"chunks"],[121,12,83,14],[121,13,83,15],[121,14,83,16],[121,15,83,17],[121,18,83,20,"chunks"],[121,24,83,26],[121,25,83,27],[121,26,83,28],[121,27,83,29],[121,28,83,30,"slice"],[121,33,83,35],[121,34,83,36,"j"],[121,35,83,37],[121,36,83,38],[122,4,84,4],[123,4,85,4],[123,11,85,11,"buffer"],[123,17,85,17],[124,2,86,0],[125,2,87,7],[125,11,87,16,"createPacketDecoderStream"],[125,36,87,41,"createPacketDecoderStream"],[125,37,87,42,"maxPayload"],[125,47,87,52],[125,49,87,54,"binaryType"],[125,59,87,64],[125,61,87,66],[126,4,88,4],[126,8,88,8],[126,9,88,9,"TEXT_DECODER"],[126,21,88,21],[126,23,88,23],[127,6,89,8,"TEXT_DECODER"],[127,18,89,20],[127,21,89,23],[127,25,89,27,"TextDecoder"],[127,36,89,38],[127,37,89,39],[127,38,89,40],[128,4,90,4],[129,4,91,4],[129,8,91,10,"chunks"],[129,14,91,16],[129,17,91,19],[129,19,91,21],[130,4,92,4],[130,8,92,8,"state"],[130,13,92,13],[130,16,92,16],[130,17,92,17],[130,18,92,18],[131,4,93,4],[131,8,93,8,"expectedLength"],[131,22,93,22],[131,25,93,25],[131,26,93,26],[131,27,93,27],[132,4,94,4],[132,8,94,8,"isBinary"],[132,16,94,16],[132,19,94,19],[132,24,94,24],[133,4,95,4],[133,11,95,11],[133,15,95,15,"TransformStream"],[133,30,95,30],[133,31,95,31],[134,6,96,8,"transform"],[134,15,96,17],[134,26,96,8,"transform"],[134,35,96,17,"transform"],[134,36,96,18,"chunk"],[134,41,96,23],[134,43,96,25,"controller"],[134,53,96,35],[134,55,96,37],[135,8,97,12,"chunks"],[135,14,97,18],[135,15,97,19,"push"],[135,19,97,23],[135,20,97,24,"chunk"],[135,25,97,29],[135,26,97,30],[136,8,98,12],[136,15,98,19],[136,19,98,23],[136,21,98,25],[137,10,99,16],[137,14,99,20,"state"],[137,19,99,25],[137,24,99,30],[137,25,99,31],[137,26,99,32],[137,51,99,57],[138,12,100,20],[138,16,100,24,"totalLength"],[138,27,100,35],[138,28,100,36,"chunks"],[138,34,100,42],[138,35,100,43],[138,38,100,46],[138,39,100,47],[138,41,100,49],[139,14,101,24],[140,12,102,20],[141,12,103,20],[141,16,103,26,"header"],[141,22,103,32],[141,25,103,35,"concatChunks"],[141,37,103,47],[141,38,103,48,"chunks"],[141,44,103,54],[141,46,103,56],[141,47,103,57],[141,48,103,58],[142,12,104,20,"isBinary"],[142,20,104,28],[142,23,104,31],[142,24,104,32,"header"],[142,30,104,38],[142,31,104,39],[142,32,104,40],[142,33,104,41],[142,36,104,44],[142,40,104,48],[142,46,104,54],[142,50,104,58],[143,12,105,20,"expectedLength"],[143,26,105,34],[143,29,105,37,"header"],[143,35,105,43],[143,36,105,44],[143,37,105,45],[143,38,105,46],[143,41,105,49],[143,45,105,53],[144,12,106,20],[144,16,106,24,"expectedLength"],[144,30,106,38],[144,33,106,41],[144,36,106,44],[144,38,106,46],[145,14,107,24,"state"],[145,19,107,29],[145,22,107,32],[145,23,107,33],[145,24,107,34],[146,12,108,20],[146,13,108,21],[146,19,109,25],[146,23,109,29,"expectedLength"],[146,37,109,43],[146,42,109,48],[146,45,109,51],[146,47,109,53],[147,14,110,24,"state"],[147,19,110,29],[147,22,110,32],[147,23,110,33],[147,24,110,34],[148,12,111,20],[148,13,111,21],[148,19,112,25],[149,14,113,24,"state"],[149,19,113,29],[149,22,113,32],[149,23,113,33],[149,24,113,34],[150,12,114,20],[151,10,115,16],[151,11,115,17],[151,17,116,21],[151,21,116,25,"state"],[151,26,116,30],[151,31,116,35],[151,32,116,36],[151,33,116,37],[151,70,116,74],[152,12,117,20],[152,16,117,24,"totalLength"],[152,27,117,35],[152,28,117,36,"chunks"],[152,34,117,42],[152,35,117,43],[152,38,117,46],[152,39,117,47],[152,41,117,49],[153,14,118,24],[154,12,119,20],[155,12,120,20],[155,16,120,26,"headerArray"],[155,27,120,37],[155,30,120,40,"concatChunks"],[155,42,120,52],[155,43,120,53,"chunks"],[155,49,120,59],[155,51,120,61],[155,52,120,62],[155,53,120,63],[156,12,121,20,"expectedLength"],[156,26,121,34],[156,29,121,37],[156,33,121,41,"DataView"],[156,41,121,49],[156,42,121,50,"headerArray"],[156,53,121,61],[156,54,121,62,"buffer"],[156,60,121,68],[156,62,121,70,"headerArray"],[156,73,121,81],[156,74,121,82,"byteOffset"],[156,84,121,92],[156,86,121,94,"headerArray"],[156,97,121,105],[156,98,121,106,"length"],[156,104,121,112],[156,105,121,113],[156,106,121,114,"getUint16"],[156,115,121,123],[156,116,121,124],[156,117,121,125],[156,118,121,126],[157,12,122,20,"state"],[157,17,122,25],[157,20,122,28],[157,21,122,29],[157,22,122,30],[158,10,123,16],[158,11,123,17],[158,17,124,21],[158,21,124,25,"state"],[158,26,124,30],[158,31,124,35],[158,32,124,36],[158,33,124,37],[158,70,124,74],[159,12,125,20],[159,16,125,24,"totalLength"],[159,27,125,35],[159,28,125,36,"chunks"],[159,34,125,42],[159,35,125,43],[159,38,125,46],[159,39,125,47],[159,41,125,49],[160,14,126,24],[161,12,127,20],[162,12,128,20],[162,16,128,26,"headerArray"],[162,28,128,37],[162,31,128,40,"concatChunks"],[162,43,128,52],[162,44,128,53,"chunks"],[162,50,128,59],[162,52,128,61],[162,53,128,62],[162,54,128,63],[163,12,129,20],[163,16,129,26,"view"],[163,20,129,30],[163,23,129,33],[163,27,129,37,"DataView"],[163,35,129,45],[163,36,129,46,"headerArray"],[163,48,129,57],[163,49,129,58,"buffer"],[163,55,129,64],[163,57,129,66,"headerArray"],[163,69,129,77],[163,70,129,78,"byteOffset"],[163,80,129,88],[163,82,129,90,"headerArray"],[163,94,129,101],[163,95,129,102,"length"],[163,101,129,108],[163,102,129,109],[164,12,130,20],[164,16,130,26,"n"],[164,17,130,27],[164,20,130,30,"view"],[164,24,130,34],[164,25,130,35,"getUint32"],[164,34,130,44],[164,35,130,45],[164,36,130,46],[164,37,130,47],[165,12,131,20],[165,16,131,24,"n"],[165,17,131,25],[165,20,131,28,"Math"],[165,24,131,32],[165,25,131,33,"pow"],[165,28,131,36],[165,29,131,37],[165,30,131,38],[165,32,131,40],[165,34,131,42],[165,37,131,45],[165,39,131,47],[165,40,131,48],[165,43,131,51],[165,44,131,52],[165,46,131,54],[166,14,132,24],[167,14,133,24,"controller"],[167,24,133,34],[167,25,133,35,"enqueue"],[167,32,133,42],[167,33,133,43,"ERROR_PACKET"],[167,43,133,55],[167,44,133,55,"ERROR_PACKET"],[167,56,133,55],[167,57,133,56],[168,14,134,24],[169,12,135,20],[170,12,136,20,"expectedLength"],[170,26,136,34],[170,29,136,37,"n"],[170,30,136,38],[170,33,136,41,"Math"],[170,37,136,45],[170,38,136,46,"pow"],[170,41,136,49],[170,42,136,50],[170,43,136,51],[170,45,136,53],[170,47,136,55],[170,48,136,56],[170,51,136,59,"view"],[170,55,136,63],[170,56,136,64,"getUint32"],[170,65,136,73],[170,66,136,74],[170,67,136,75],[170,68,136,76],[171,12,137,20,"state"],[171,17,137,25],[171,20,137,28],[171,21,137,29],[171,22,137,30],[172,10,138,16],[172,11,138,17],[172,17,139,21],[173,12,140,20],[173,16,140,24,"totalLength"],[173,27,140,35],[173,28,140,36,"chunks"],[173,34,140,42],[173,35,140,43],[173,38,140,46,"expectedLength"],[173,52,140,60],[173,54,140,62],[174,14,141,24],[175,12,142,20],[176,12,143,20],[176,16,143,26,"data"],[176,20,143,30],[176,23,143,33,"concatChunks"],[176,35,143,45],[176,36,143,46,"chunks"],[176,42,143,52],[176,44,143,54,"expectedLength"],[176,58,143,68],[176,59,143,69],[177,12,144,20,"controller"],[177,22,144,30],[177,23,144,31,"enqueue"],[177,30,144,38],[177,31,144,39],[177,35,144,39,"decodePacket"],[177,50,144,51],[177,51,144,51,"decodePacket"],[177,63,144,51],[177,65,144,52,"isBinary"],[177,73,144,60],[177,76,144,63,"data"],[177,80,144,67],[177,83,144,70,"TEXT_DECODER"],[177,95,144,82],[177,96,144,83,"decode"],[177,102,144,89],[177,103,144,90,"data"],[177,107,144,94],[177,108,144,95],[177,110,144,97,"binaryType"],[177,120,144,107],[177,121,144,108],[177,122,144,109],[178,12,145,20,"state"],[178,17,145,25],[178,20,145,28],[178,21,145,29],[178,22,145,30],[179,10,146,16],[180,10,147,16],[180,14,147,20,"expectedLength"],[180,28,147,34],[180,33,147,39],[180,34,147,40],[180,38,147,44,"expectedLength"],[180,52,147,58],[180,55,147,61,"maxPayload"],[180,65,147,71],[180,67,147,73],[181,12,148,20,"controller"],[181,22,148,30],[181,23,148,31,"enqueue"],[181,30,148,38],[181,31,148,39,"ERROR_PACKET"],[181,41,148,51],[181,42,148,51,"ERROR_PACKET"],[181,54,148,51],[181,55,148,52],[182,12,149,20],[183,10,150,16],[184,8,151,12],[185,6,152,8],[186,4,153,4],[186,5,153,5],[186,6,153,6],[187,2,154,0],[188,2,155,7],[188,6,155,13,"protocol"],[188,14,155,21],[188,17,155,24],[188,18,155,25],[189,0,155,26],[189,3]],"functionMap":{"names":["<global>","encodePayload","packets.forEach$argument_0","encodePacket$argument_2","decodePayload","createPacketEncoderStream","TransformStream$argument_0.transform","encodePacketToBinary$argument_1","totalLength","chunks.reduce$argument_0","concatChunks","createPacketDecoderStream"],"mappings":"AAA;sBCI;oBCK;oCCE;SDK;KDC;CDC;sBIC;CJW;OKC;QCE;yCCC;aD0B;SDC;CLE;AQE;yBCC,kCD;CRC;AUC;CViB;OWC;QLS;SKwD;CXE"},"hasCjsExports":false},"type":"js/module"}]}