{"dependencies":[{"name":"socket.io-client","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":46,"index":46}}],"key":"LVgCyxgUdze/lYG0kA6DdCAztfM=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"socketService\", {\n    enumerable: true,\n    get: function () {\n      return socketService;\n    }\n  });\n  var _socketIoClient = require(_dependencyMap[0], \"socket.io-client\");\n  const SOCKET_URL = process.env.EXPO_PUBLIC_BACKEND_URL || 'http://localhost:8001';\n  class SocketService {\n    socket = null;\n    listeners = new Map();\n    async connect() {\n      if (this.socket?.connected) return;\n      const token = await SecureStore.getItemAsync('authToken');\n      if (!token) {\n        console.log('No auth token found');\n        return;\n      }\n      this.socket = (0, _socketIoClient.io)(SOCKET_URL, {\n        transports: ['websocket', 'polling'],\n        reconnection: true,\n        reconnectionDelay: 1000,\n        reconnectionAttempts: 5\n      });\n      this.socket.on('connect', () => {\n        console.log('Socket connected');\n        this.socket?.emit('authenticate', {\n          token\n        });\n      });\n      this.socket.on('authenticated', data => {\n        console.log('Socket authenticated:', data);\n      });\n      this.socket.on('connect_error', error => {\n        console.error('Socket connection error:', error);\n      });\n      this.socket.on('disconnect', () => {\n        console.log('Socket disconnected');\n      });\n    }\n    disconnect() {\n      if (this.socket) {\n        this.socket.disconnect();\n        this.socket = null;\n        this.listeners.clear();\n      }\n    }\n    joinCommunity() {\n      if (!this.socket) return;\n      this.socket.emit('join_community', {});\n    }\n    sendMessage(message) {\n      if (!this.socket) return;\n      this.socket.emit('send_message', {\n        message\n      });\n    }\n    onNewMessage(callback) {\n      if (!this.socket) return () => {};\n      this.socket.on('new_message', callback);\n\n      // Store listener for cleanup\n      if (!this.listeners.has('new_message')) {\n        this.listeners.set('new_message', []);\n      }\n      this.listeners.get('new_message')?.push(callback);\n      return () => {\n        this.socket?.off('new_message', callback);\n      };\n    }\n    onUserJoined(callback) {\n      if (!this.socket) return () => {};\n      this.socket.on('user_joined', callback);\n      return () => {\n        this.socket?.off('user_joined', callback);\n      };\n    }\n    emitTyping() {\n      if (!this.socket) return;\n      this.socket.emit('typing', {});\n    }\n    isConnected() {\n      return this.socket?.connected || false;\n    }\n  }\n  const socketService = new SocketService();\n});","lineCount":93,"map":[[7,2,96,0,"Object"],[7,8,96,0],[7,9,96,0,"defineProperty"],[7,23,96,0],[7,24,96,0,"exports"],[7,31,96,0],[8,4,96,0,"enumerable"],[8,14,96,0],[9,4,96,0,"get"],[9,7,96,0],[9,18,96,0,"get"],[9,19,96,0],[10,6,96,0],[10,13,96,0,"socketService"],[10,26,96,0],[11,4,96,0],[12,2,96,0],[13,2,1,0],[13,6,1,0,"_socketIoClient"],[13,21,1,0],[13,24,1,0,"require"],[13,31,1,0],[13,32,1,0,"_dependencyMap"],[13,46,1,0],[14,2,4,0],[14,8,4,6,"SOCKET_URL"],[14,18,4,16],[14,21,4,19,"process"],[14,28,4,26],[14,29,4,27,"env"],[14,32,4,30],[14,33,4,31,"EXPO_PUBLIC_BACKEND_URL"],[14,56,4,54],[14,60,4,58],[14,83,4,81],[15,2,6,0],[15,8,6,6,"SocketService"],[15,21,6,19],[15,22,6,20],[16,4,7,10,"socket"],[16,10,7,16],[16,13,7,34],[16,17,7,38],[17,4,8,10,"listeners"],[17,13,8,19],[17,16,8,47],[17,20,8,51,"Map"],[17,23,8,54],[17,24,8,55],[17,25,8,56],[18,4,10,2],[18,10,10,8,"connect"],[18,17,10,15,"connect"],[18,18,10,15],[18,20,10,18],[19,6,11,4],[19,10,11,8],[19,14,11,12],[19,15,11,13,"socket"],[19,21,11,19],[19,23,11,21,"connected"],[19,32,11,30],[19,34,11,32],[20,6,13,4],[20,12,13,10,"token"],[20,17,13,15],[20,20,13,18],[20,26,13,24,"SecureStore"],[20,37,13,35],[20,38,13,36,"getItemAsync"],[20,50,13,48],[20,51,13,49],[20,62,13,60],[20,63,13,61],[21,6,14,4],[21,10,14,8],[21,11,14,9,"token"],[21,16,14,14],[21,18,14,16],[22,8,15,6,"console"],[22,15,15,13],[22,16,15,14,"log"],[22,19,15,17],[22,20,15,18],[22,41,15,39],[22,42,15,40],[23,8,16,6],[24,6,17,4],[25,6,19,4],[25,10,19,8],[25,11,19,9,"socket"],[25,17,19,15],[25,20,19,18],[25,24,19,18,"io"],[25,39,19,20],[25,40,19,20,"io"],[25,42,19,20],[25,44,19,21,"SOCKET_URL"],[25,54,19,31],[25,56,19,33],[26,8,20,6,"transports"],[26,18,20,16],[26,20,20,18],[26,21,20,19],[26,32,20,30],[26,34,20,32],[26,43,20,41],[26,44,20,42],[27,8,21,6,"reconnection"],[27,20,21,18],[27,22,21,20],[27,26,21,24],[28,8,22,6,"reconnectionDelay"],[28,25,22,23],[28,27,22,25],[28,31,22,29],[29,8,23,6,"reconnectionAttempts"],[29,28,23,26],[29,30,23,28],[30,6,24,4],[30,7,24,5],[30,8,24,6],[31,6,26,4],[31,10,26,8],[31,11,26,9,"socket"],[31,17,26,15],[31,18,26,16,"on"],[31,20,26,18],[31,21,26,19],[31,30,26,28],[31,32,26,30],[31,38,26,36],[32,8,27,6,"console"],[32,15,27,13],[32,16,27,14,"log"],[32,19,27,17],[32,20,27,18],[32,38,27,36],[32,39,27,37],[33,8,28,6],[33,12,28,10],[33,13,28,11,"socket"],[33,19,28,17],[33,21,28,19,"emit"],[33,25,28,23],[33,26,28,24],[33,40,28,38],[33,42,28,40],[34,10,28,42,"token"],[35,8,28,48],[35,9,28,49],[35,10,28,50],[36,6,29,4],[36,7,29,5],[36,8,29,6],[37,6,31,4],[37,10,31,8],[37,11,31,9,"socket"],[37,17,31,15],[37,18,31,16,"on"],[37,20,31,18],[37,21,31,19],[37,36,31,34],[37,38,31,37,"data"],[37,42,31,41],[37,46,31,46],[38,8,32,6,"console"],[38,15,32,13],[38,16,32,14,"log"],[38,19,32,17],[38,20,32,18],[38,43,32,41],[38,45,32,43,"data"],[38,49,32,47],[38,50,32,48],[39,6,33,4],[39,7,33,5],[39,8,33,6],[40,6,35,4],[40,10,35,8],[40,11,35,9,"socket"],[40,17,35,15],[40,18,35,16,"on"],[40,20,35,18],[40,21,35,19],[40,36,35,34],[40,38,35,37,"error"],[40,43,35,42],[40,47,35,47],[41,8,36,6,"console"],[41,15,36,13],[41,16,36,14,"error"],[41,21,36,19],[41,22,36,20],[41,48,36,46],[41,50,36,48,"error"],[41,55,36,53],[41,56,36,54],[42,6,37,4],[42,7,37,5],[42,8,37,6],[43,6,39,4],[43,10,39,8],[43,11,39,9,"socket"],[43,17,39,15],[43,18,39,16,"on"],[43,20,39,18],[43,21,39,19],[43,33,39,31],[43,35,39,33],[43,41,39,39],[44,8,40,6,"console"],[44,15,40,13],[44,16,40,14,"log"],[44,19,40,17],[44,20,40,18],[44,41,40,39],[44,42,40,40],[45,6,41,4],[45,7,41,5],[45,8,41,6],[46,4,42,2],[47,4,44,2,"disconnect"],[47,14,44,12,"disconnect"],[47,15,44,12],[47,17,44,15],[48,6,45,4],[48,10,45,8],[48,14,45,12],[48,15,45,13,"socket"],[48,21,45,19],[48,23,45,21],[49,8,46,6],[49,12,46,10],[49,13,46,11,"socket"],[49,19,46,17],[49,20,46,18,"disconnect"],[49,30,46,28],[49,31,46,29],[49,32,46,30],[50,8,47,6],[50,12,47,10],[50,13,47,11,"socket"],[50,19,47,17],[50,22,47,20],[50,26,47,24],[51,8,48,6],[51,12,48,10],[51,13,48,11,"listeners"],[51,22,48,20],[51,23,48,21,"clear"],[51,28,48,26],[51,29,48,27],[51,30,48,28],[52,6,49,4],[53,4,50,2],[54,4,52,2,"joinCommunity"],[54,17,52,15,"joinCommunity"],[54,18,52,15],[54,20,52,18],[55,6,53,4],[55,10,53,8],[55,11,53,9],[55,15,53,13],[55,16,53,14,"socket"],[55,22,53,20],[55,24,53,22],[56,6,54,4],[56,10,54,8],[56,11,54,9,"socket"],[56,17,54,15],[56,18,54,16,"emit"],[56,22,54,20],[56,23,54,21],[56,39,54,37],[56,41,54,39],[56,42,54,40],[56,43,54,41],[56,44,54,42],[57,4,55,2],[58,4,57,2,"sendMessage"],[58,15,57,13,"sendMessage"],[58,16,57,14,"message"],[58,23,57,29],[58,25,57,31],[59,6,58,4],[59,10,58,8],[59,11,58,9],[59,15,58,13],[59,16,58,14,"socket"],[59,22,58,20],[59,24,58,22],[60,6,59,4],[60,10,59,8],[60,11,59,9,"socket"],[60,17,59,15],[60,18,59,16,"emit"],[60,22,59,20],[60,23,59,21],[60,37,59,35],[60,39,59,37],[61,8,59,39,"message"],[62,6,59,47],[62,7,59,48],[62,8,59,49],[63,4,60,2],[64,4,62,2,"onNewMessage"],[64,16,62,14,"onNewMessage"],[64,17,62,15,"callback"],[64,25,62,44],[64,27,62,46],[65,6,63,4],[65,10,63,8],[65,11,63,9],[65,15,63,13],[65,16,63,14,"socket"],[65,22,63,20],[65,24,63,22],[65,31,63,29],[65,37,63,35],[65,38,63,36],[65,39,63,37],[66,6,65,4],[66,10,65,8],[66,11,65,9,"socket"],[66,17,65,15],[66,18,65,16,"on"],[66,20,65,18],[66,21,65,19],[66,34,65,32],[66,36,65,34,"callback"],[66,44,65,42],[66,45,65,43],[68,6,67,4],[69,6,68,4],[69,10,68,8],[69,11,68,9],[69,15,68,13],[69,16,68,14,"listeners"],[69,25,68,23],[69,26,68,24,"has"],[69,29,68,27],[69,30,68,28],[69,43,68,41],[69,44,68,42],[69,46,68,44],[70,8,69,6],[70,12,69,10],[70,13,69,11,"listeners"],[70,22,69,20],[70,23,69,21,"set"],[70,26,69,24],[70,27,69,25],[70,40,69,38],[70,42,69,40],[70,44,69,42],[70,45,69,43],[71,6,70,4],[72,6,71,4],[72,10,71,8],[72,11,71,9,"listeners"],[72,20,71,18],[72,21,71,19,"get"],[72,24,71,22],[72,25,71,23],[72,38,71,36],[72,39,71,37],[72,41,71,39,"push"],[72,45,71,43],[72,46,71,44,"callback"],[72,54,71,52],[72,55,71,53],[73,6,73,4],[73,13,73,11],[73,19,73,17],[74,8,74,6],[74,12,74,10],[74,13,74,11,"socket"],[74,19,74,17],[74,21,74,19,"off"],[74,24,74,22],[74,25,74,23],[74,38,74,36],[74,40,74,38,"callback"],[74,48,74,46],[74,49,74,47],[75,6,75,4],[75,7,75,5],[76,4,76,2],[77,4,78,2,"onUserJoined"],[77,16,78,14,"onUserJoined"],[77,17,78,15,"callback"],[77,25,78,44],[77,27,78,46],[78,6,79,4],[78,10,79,8],[78,11,79,9],[78,15,79,13],[78,16,79,14,"socket"],[78,22,79,20],[78,24,79,22],[78,31,79,29],[78,37,79,35],[78,38,79,36],[78,39,79,37],[79,6,80,4],[79,10,80,8],[79,11,80,9,"socket"],[79,17,80,15],[79,18,80,16,"on"],[79,20,80,18],[79,21,80,19],[79,34,80,32],[79,36,80,34,"callback"],[79,44,80,42],[79,45,80,43],[80,6,81,4],[80,13,81,11],[80,19,81,17],[81,8,82,6],[81,12,82,10],[81,13,82,11,"socket"],[81,19,82,17],[81,21,82,19,"off"],[81,24,82,22],[81,25,82,23],[81,38,82,36],[81,40,82,38,"callback"],[81,48,82,46],[81,49,82,47],[82,6,83,4],[82,7,83,5],[83,4,84,2],[84,4,86,2,"emitTyping"],[84,14,86,12,"emitTyping"],[84,15,86,12],[84,17,86,15],[85,6,87,4],[85,10,87,8],[85,11,87,9],[85,15,87,13],[85,16,87,14,"socket"],[85,22,87,20],[85,24,87,22],[86,6,88,4],[86,10,88,8],[86,11,88,9,"socket"],[86,17,88,15],[86,18,88,16,"emit"],[86,22,88,20],[86,23,88,21],[86,31,88,29],[86,33,88,31],[86,34,88,32],[86,35,88,33],[86,36,88,34],[87,4,89,2],[88,4,91,2,"isConnected"],[88,15,91,13,"isConnected"],[88,16,91,13],[88,18,91,25],[89,6,92,4],[89,13,92,11],[89,17,92,15],[89,18,92,16,"socket"],[89,24,92,22],[89,26,92,24,"connected"],[89,35,92,33],[89,39,92,37],[89,44,92,42],[90,4,93,2],[91,2,94,0],[92,2,96,7],[92,8,96,13,"socketService"],[92,21,96,26],[92,24,96,29],[92,28,96,33,"SocketService"],[92,41,96,46],[92,42,96,47],[92,43,96,48],[93,0,96,49],[93,3]],"functionMap":{"names":["<global>","SocketService","SocketService#connect","on$argument_1","SocketService#disconnect","SocketService#joinCommunity","SocketService#sendMessage","SocketService#onNewMessage","<anonymous>","SocketService#onUserJoined","SocketService#emitTyping","SocketService#isConnected"],"mappings":"AAA;ACK;ECI;8BCgB;KDG;oCCE;KDE;oCCE;KDE;iCCE;KDE;GDC;EGE;GHM;EIE;GJG;EKE;GLG;EME;6BCC,QD;WCU;KDE;GNC;EQE;6BDC,QC;WDE;KCE;GRC;ESE;GTG;EUE;GVE;CDC"},"hasCjsExports":false},"type":"js/module"}]}