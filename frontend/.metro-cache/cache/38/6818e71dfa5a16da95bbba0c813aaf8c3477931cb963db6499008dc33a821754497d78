{"dependencies":[{"name":"socket.io-client","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":46,"index":46}}],"key":"LVgCyxgUdze/lYG0kA6DdCAztfM=","exportNames":["*"],"imports":1}},{"name":"expo-secure-store","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":47},"end":{"line":2,"column":49,"index":96}}],"key":"BU2XtfznZ4PiVldqd/oueHCCaLo=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  Object.defineProperty(exports, \"socketService\", {\n    enumerable: true,\n    get: function () {\n      return socketService;\n    }\n  });\n  var _socketIoClient = require(_dependencyMap[0], \"socket.io-client\");\n  var _expoSecureStore = require(_dependencyMap[1], \"expo-secure-store\");\n  var SecureStore = _interopNamespace(_expoSecureStore);\n  const SOCKET_URL = process.env.EXPO_PUBLIC_BACKEND_URL || 'http://localhost:8001';\n  class SocketService {\n    socket = null;\n    listeners = new Map();\n    async connect() {\n      if (this.socket?.connected) return;\n      const token = await SecureStore.getItemAsync('authToken');\n      if (!token) {\n        console.log('No auth token found');\n        return;\n      }\n      this.socket = (0, _socketIoClient.io)(SOCKET_URL, {\n        transports: ['websocket', 'polling'],\n        reconnection: true,\n        reconnectionDelay: 1000,\n        reconnectionAttempts: 5\n      });\n      this.socket.on('connect', () => {\n        console.log('Socket connected');\n        this.socket?.emit('authenticate', {\n          token\n        });\n      });\n      this.socket.on('authenticated', data => {\n        console.log('Socket authenticated:', data);\n      });\n      this.socket.on('connect_error', error => {\n        console.error('Socket connection error:', error);\n      });\n      this.socket.on('disconnect', () => {\n        console.log('Socket disconnected');\n      });\n    }\n    disconnect() {\n      if (this.socket) {\n        this.socket.disconnect();\n        this.socket = null;\n        this.listeners.clear();\n      }\n    }\n    joinCommunity() {\n      if (!this.socket) return;\n      this.socket.emit('join_community', {});\n    }\n    sendMessage(message) {\n      if (!this.socket) return;\n      this.socket.emit('send_message', {\n        message\n      });\n    }\n    onNewMessage(callback) {\n      if (!this.socket) return () => {};\n      this.socket.on('new_message', callback);\n\n      // Store listener for cleanup\n      if (!this.listeners.has('new_message')) {\n        this.listeners.set('new_message', []);\n      }\n      this.listeners.get('new_message')?.push(callback);\n      return () => {\n        this.socket?.off('new_message', callback);\n      };\n    }\n    onUserJoined(callback) {\n      if (!this.socket) return () => {};\n      this.socket.on('user_joined', callback);\n      return () => {\n        this.socket?.off('user_joined', callback);\n      };\n    }\n    emitTyping() {\n      if (!this.socket) return;\n      this.socket.emit('typing', {});\n    }\n    isConnected() {\n      return this.socket?.connected || false;\n    }\n  }\n  const socketService = new SocketService();\n});","lineCount":110,"map":[[22,2,96,0,"Object"],[22,8,96,0],[22,9,96,0,"defineProperty"],[22,23,96,0],[22,24,96,0,"exports"],[22,31,96,0],[23,4,96,0,"enumerable"],[23,14,96,0],[24,4,96,0,"get"],[24,7,96,0],[24,18,96,0,"get"],[24,19,96,0],[25,6,96,0],[25,13,96,0,"socketService"],[25,26,96,0],[26,4,96,0],[27,2,96,0],[28,2,1,0],[28,6,1,0,"_socketIoClient"],[28,21,1,0],[28,24,1,0,"require"],[28,31,1,0],[28,32,1,0,"_dependencyMap"],[28,46,1,0],[29,2,2,0],[29,6,2,0,"_expoSecureStore"],[29,22,2,0],[29,25,2,0,"require"],[29,32,2,0],[29,33,2,0,"_dependencyMap"],[29,47,2,0],[30,2,2,0],[30,6,2,0,"SecureStore"],[30,17,2,0],[30,20,2,0,"_interopNamespace"],[30,37,2,0],[30,38,2,0,"_expoSecureStore"],[30,54,2,0],[31,2,4,0],[31,8,4,6,"SOCKET_URL"],[31,18,4,16],[31,21,4,19,"process"],[31,28,4,26],[31,29,4,27,"env"],[31,32,4,30],[31,33,4,31,"EXPO_PUBLIC_BACKEND_URL"],[31,56,4,54],[31,60,4,58],[31,83,4,81],[32,2,6,0],[32,8,6,6,"SocketService"],[32,21,6,19],[32,22,6,20],[33,4,7,10,"socket"],[33,10,7,16],[33,13,7,34],[33,17,7,38],[34,4,8,10,"listeners"],[34,13,8,19],[34,16,8,47],[34,20,8,51,"Map"],[34,23,8,54],[34,24,8,55],[34,25,8,56],[35,4,10,2],[35,10,10,8,"connect"],[35,17,10,15,"connect"],[35,18,10,15],[35,20,10,18],[36,6,11,4],[36,10,11,8],[36,14,11,12],[36,15,11,13,"socket"],[36,21,11,19],[36,23,11,21,"connected"],[36,32,11,30],[36,34,11,32],[37,6,13,4],[37,12,13,10,"token"],[37,17,13,15],[37,20,13,18],[37,26,13,24,"SecureStore"],[37,37,13,35],[37,38,13,36,"getItemAsync"],[37,50,13,48],[37,51,13,49],[37,62,13,60],[37,63,13,61],[38,6,14,4],[38,10,14,8],[38,11,14,9,"token"],[38,16,14,14],[38,18,14,16],[39,8,15,6,"console"],[39,15,15,13],[39,16,15,14,"log"],[39,19,15,17],[39,20,15,18],[39,41,15,39],[39,42,15,40],[40,8,16,6],[41,6,17,4],[42,6,19,4],[42,10,19,8],[42,11,19,9,"socket"],[42,17,19,15],[42,20,19,18],[42,24,19,18,"io"],[42,39,19,20],[42,40,19,20,"io"],[42,42,19,20],[42,44,19,21,"SOCKET_URL"],[42,54,19,31],[42,56,19,33],[43,8,20,6,"transports"],[43,18,20,16],[43,20,20,18],[43,21,20,19],[43,32,20,30],[43,34,20,32],[43,43,20,41],[43,44,20,42],[44,8,21,6,"reconnection"],[44,20,21,18],[44,22,21,20],[44,26,21,24],[45,8,22,6,"reconnectionDelay"],[45,25,22,23],[45,27,22,25],[45,31,22,29],[46,8,23,6,"reconnectionAttempts"],[46,28,23,26],[46,30,23,28],[47,6,24,4],[47,7,24,5],[47,8,24,6],[48,6,26,4],[48,10,26,8],[48,11,26,9,"socket"],[48,17,26,15],[48,18,26,16,"on"],[48,20,26,18],[48,21,26,19],[48,30,26,28],[48,32,26,30],[48,38,26,36],[49,8,27,6,"console"],[49,15,27,13],[49,16,27,14,"log"],[49,19,27,17],[49,20,27,18],[49,38,27,36],[49,39,27,37],[50,8,28,6],[50,12,28,10],[50,13,28,11,"socket"],[50,19,28,17],[50,21,28,19,"emit"],[50,25,28,23],[50,26,28,24],[50,40,28,38],[50,42,28,40],[51,10,28,42,"token"],[52,8,28,48],[52,9,28,49],[52,10,28,50],[53,6,29,4],[53,7,29,5],[53,8,29,6],[54,6,31,4],[54,10,31,8],[54,11,31,9,"socket"],[54,17,31,15],[54,18,31,16,"on"],[54,20,31,18],[54,21,31,19],[54,36,31,34],[54,38,31,37,"data"],[54,42,31,41],[54,46,31,46],[55,8,32,6,"console"],[55,15,32,13],[55,16,32,14,"log"],[55,19,32,17],[55,20,32,18],[55,43,32,41],[55,45,32,43,"data"],[55,49,32,47],[55,50,32,48],[56,6,33,4],[56,7,33,5],[56,8,33,6],[57,6,35,4],[57,10,35,8],[57,11,35,9,"socket"],[57,17,35,15],[57,18,35,16,"on"],[57,20,35,18],[57,21,35,19],[57,36,35,34],[57,38,35,37,"error"],[57,43,35,42],[57,47,35,47],[58,8,36,6,"console"],[58,15,36,13],[58,16,36,14,"error"],[58,21,36,19],[58,22,36,20],[58,48,36,46],[58,50,36,48,"error"],[58,55,36,53],[58,56,36,54],[59,6,37,4],[59,7,37,5],[59,8,37,6],[60,6,39,4],[60,10,39,8],[60,11,39,9,"socket"],[60,17,39,15],[60,18,39,16,"on"],[60,20,39,18],[60,21,39,19],[60,33,39,31],[60,35,39,33],[60,41,39,39],[61,8,40,6,"console"],[61,15,40,13],[61,16,40,14,"log"],[61,19,40,17],[61,20,40,18],[61,41,40,39],[61,42,40,40],[62,6,41,4],[62,7,41,5],[62,8,41,6],[63,4,42,2],[64,4,44,2,"disconnect"],[64,14,44,12,"disconnect"],[64,15,44,12],[64,17,44,15],[65,6,45,4],[65,10,45,8],[65,14,45,12],[65,15,45,13,"socket"],[65,21,45,19],[65,23,45,21],[66,8,46,6],[66,12,46,10],[66,13,46,11,"socket"],[66,19,46,17],[66,20,46,18,"disconnect"],[66,30,46,28],[66,31,46,29],[66,32,46,30],[67,8,47,6],[67,12,47,10],[67,13,47,11,"socket"],[67,19,47,17],[67,22,47,20],[67,26,47,24],[68,8,48,6],[68,12,48,10],[68,13,48,11,"listeners"],[68,22,48,20],[68,23,48,21,"clear"],[68,28,48,26],[68,29,48,27],[68,30,48,28],[69,6,49,4],[70,4,50,2],[71,4,52,2,"joinCommunity"],[71,17,52,15,"joinCommunity"],[71,18,52,15],[71,20,52,18],[72,6,53,4],[72,10,53,8],[72,11,53,9],[72,15,53,13],[72,16,53,14,"socket"],[72,22,53,20],[72,24,53,22],[73,6,54,4],[73,10,54,8],[73,11,54,9,"socket"],[73,17,54,15],[73,18,54,16,"emit"],[73,22,54,20],[73,23,54,21],[73,39,54,37],[73,41,54,39],[73,42,54,40],[73,43,54,41],[73,44,54,42],[74,4,55,2],[75,4,57,2,"sendMessage"],[75,15,57,13,"sendMessage"],[75,16,57,14,"message"],[75,23,57,29],[75,25,57,31],[76,6,58,4],[76,10,58,8],[76,11,58,9],[76,15,58,13],[76,16,58,14,"socket"],[76,22,58,20],[76,24,58,22],[77,6,59,4],[77,10,59,8],[77,11,59,9,"socket"],[77,17,59,15],[77,18,59,16,"emit"],[77,22,59,20],[77,23,59,21],[77,37,59,35],[77,39,59,37],[78,8,59,39,"message"],[79,6,59,47],[79,7,59,48],[79,8,59,49],[80,4,60,2],[81,4,62,2,"onNewMessage"],[81,16,62,14,"onNewMessage"],[81,17,62,15,"callback"],[81,25,62,44],[81,27,62,46],[82,6,63,4],[82,10,63,8],[82,11,63,9],[82,15,63,13],[82,16,63,14,"socket"],[82,22,63,20],[82,24,63,22],[82,31,63,29],[82,37,63,35],[82,38,63,36],[82,39,63,37],[83,6,65,4],[83,10,65,8],[83,11,65,9,"socket"],[83,17,65,15],[83,18,65,16,"on"],[83,20,65,18],[83,21,65,19],[83,34,65,32],[83,36,65,34,"callback"],[83,44,65,42],[83,45,65,43],[85,6,67,4],[86,6,68,4],[86,10,68,8],[86,11,68,9],[86,15,68,13],[86,16,68,14,"listeners"],[86,25,68,23],[86,26,68,24,"has"],[86,29,68,27],[86,30,68,28],[86,43,68,41],[86,44,68,42],[86,46,68,44],[87,8,69,6],[87,12,69,10],[87,13,69,11,"listeners"],[87,22,69,20],[87,23,69,21,"set"],[87,26,69,24],[87,27,69,25],[87,40,69,38],[87,42,69,40],[87,44,69,42],[87,45,69,43],[88,6,70,4],[89,6,71,4],[89,10,71,8],[89,11,71,9,"listeners"],[89,20,71,18],[89,21,71,19,"get"],[89,24,71,22],[89,25,71,23],[89,38,71,36],[89,39,71,37],[89,41,71,39,"push"],[89,45,71,43],[89,46,71,44,"callback"],[89,54,71,52],[89,55,71,53],[90,6,73,4],[90,13,73,11],[90,19,73,17],[91,8,74,6],[91,12,74,10],[91,13,74,11,"socket"],[91,19,74,17],[91,21,74,19,"off"],[91,24,74,22],[91,25,74,23],[91,38,74,36],[91,40,74,38,"callback"],[91,48,74,46],[91,49,74,47],[92,6,75,4],[92,7,75,5],[93,4,76,2],[94,4,78,2,"onUserJoined"],[94,16,78,14,"onUserJoined"],[94,17,78,15,"callback"],[94,25,78,44],[94,27,78,46],[95,6,79,4],[95,10,79,8],[95,11,79,9],[95,15,79,13],[95,16,79,14,"socket"],[95,22,79,20],[95,24,79,22],[95,31,79,29],[95,37,79,35],[95,38,79,36],[95,39,79,37],[96,6,80,4],[96,10,80,8],[96,11,80,9,"socket"],[96,17,80,15],[96,18,80,16,"on"],[96,20,80,18],[96,21,80,19],[96,34,80,32],[96,36,80,34,"callback"],[96,44,80,42],[96,45,80,43],[97,6,81,4],[97,13,81,11],[97,19,81,17],[98,8,82,6],[98,12,82,10],[98,13,82,11,"socket"],[98,19,82,17],[98,21,82,19,"off"],[98,24,82,22],[98,25,82,23],[98,38,82,36],[98,40,82,38,"callback"],[98,48,82,46],[98,49,82,47],[99,6,83,4],[99,7,83,5],[100,4,84,2],[101,4,86,2,"emitTyping"],[101,14,86,12,"emitTyping"],[101,15,86,12],[101,17,86,15],[102,6,87,4],[102,10,87,8],[102,11,87,9],[102,15,87,13],[102,16,87,14,"socket"],[102,22,87,20],[102,24,87,22],[103,6,88,4],[103,10,88,8],[103,11,88,9,"socket"],[103,17,88,15],[103,18,88,16,"emit"],[103,22,88,20],[103,23,88,21],[103,31,88,29],[103,33,88,31],[103,34,88,32],[103,35,88,33],[103,36,88,34],[104,4,89,2],[105,4,91,2,"isConnected"],[105,15,91,13,"isConnected"],[105,16,91,13],[105,18,91,25],[106,6,92,4],[106,13,92,11],[106,17,92,15],[106,18,92,16,"socket"],[106,24,92,22],[106,26,92,24,"connected"],[106,35,92,33],[106,39,92,37],[106,44,92,42],[107,4,93,2],[108,2,94,0],[109,2,96,7],[109,8,96,13,"socketService"],[109,21,96,26],[109,24,96,29],[109,28,96,33,"SocketService"],[109,41,96,46],[109,42,96,47],[109,43,96,48],[110,0,96,49],[110,3]],"functionMap":{"names":["<global>","SocketService","SocketService#connect","on$argument_1","SocketService#disconnect","SocketService#joinCommunity","SocketService#sendMessage","SocketService#onNewMessage","<anonymous>","SocketService#onUserJoined","SocketService#emitTyping","SocketService#isConnected"],"mappings":"AAA;ACK;ECI;8BCgB;KDG;oCCE;KDE;oCCE;KDE;iCCE;KDE;GDC;EGE;GHM;EIE;GJG;EKE;GLG;EME;6BCC,QD;WCU;KDE;GNC;EQE;6BDC,QC;WDE;KCE;GRC;ESE;GTG;EUE;GVE;CDC"},"hasCjsExports":false},"type":"js/module"}]}